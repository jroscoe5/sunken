{"version":3,"file":"boardgame.io-angular.js.map","sources":["ng://boardgame.io-angular/lib/bio-client.component.ts","ng://boardgame.io-angular/lib/bio-debug.component.ts","ng://boardgame.io-angular/lib/boardgame-io.module.ts"],"sourcesContent":["import { AfterContentInit, Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Client as RawClient, Debug } from 'boardgame.io/dist/client';\r\n\r\n@Component({\r\n  selector: 'bio-client',\r\n  template: `\r\n    <ng-container *ngIf=\"client\">\r\n      <ng-container *ngComponentOutlet=\"board;\r\n                                            ndcDynamicInputs: getBoardInputs()\">\r\n      </ng-container>\r\n    </ng-container>\r\n\r\n    <bio-debug *ngIf=\"debug && client\"\r\n               [gamestate]=\"client.getState()\"\r\n               [gameID]=\"gameID\"\r\n               [playerID]=\"playerID\"\r\n               [isMultiplayer]=\"multiplayer !== undefined\"\r\n               [moves]=\"client.moves\"\r\n               [events]=\"client.events\"\r\n               [store]=\"client.store\"\r\n               [step]=\"client.step\"\r\n               [reset]=\"client.reset\"\r\n               [reducer]=\"client.reducer\"\r\n    ></bio-debug>\r\n  `\r\n})\r\nexport class ClientComponent implements OnInit, OnChanges, AfterContentInit {\r\n\r\n  // class inputs (possible move to higher level initialization (e.g., class factory)\r\n  @Input() game: any;\r\n  @Input() numPlayers: number;\r\n  @Input() board: any;\r\n  @Input() multiplayer: any;\r\n  @Input() ai: any;\r\n  @Input() enhancer: any;\r\n\r\n  // instance inputs\r\n  @Input() gameID = 'default';\r\n  @Input() playerID: string = null;\r\n  @Input() credentials: string = null; // TODO this\r\n\r\n  // overridable inputs (both class and instance)\r\n  @Input() debug = true;\r\n\r\n  client: any;\r\n\r\n  ngOnInit() {\r\n    this.client = RawClient({\r\n      game: this.game,\r\n      ai: this.ai,\r\n      numPlayers: this.numPlayers,\r\n      multiplayer: this.multiplayer,\r\n      gameID: this.gameID,\r\n      playerID: this.playerID,\r\n      credentials: this.credentials,\r\n      enhancer: this.enhancer,\r\n    });\r\n\r\n    // todo is this needed? (forceUpdate on react)\r\n    // this.client.subscribe(() => {\r\n    //   console.log('client.subscribe triggered (forceUpdate needed?)');\r\n    // });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (this.client) {\r\n      // noinspection TsLint\r\n      if (changes.gameID && changes.gameID.currentValue != changes.gameID.previousValue) {\r\n        this.client.updateGameID(changes.gameID.currentValue);\r\n      }\r\n      // noinspection TsLint\r\n      if (changes.playerID && changes.playerID.currentValue != changes.playerID.previousValue) {\r\n        this.client.updatePlayerID(changes.playerID.currentValue);\r\n      }\r\n      // noinspection TsLint\r\n      if (changes.credentials && changes.credentials.currentValue != changes.credentials.previousValue) {\r\n        this.client.updateCredentials(changes.credentials.currentValue);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngAfterContentInit() {\r\n    this.client.connect();\r\n  }\r\n\r\n  getBoardInputs() {\r\n    const state = this.client.getState();\r\n    return {\r\n      ...state,\r\n      isMultiplayer: this.multiplayer !== undefined,\r\n      moves: this.client.moves,\r\n      events: this.client.events,\r\n      gameID: this.gameID,\r\n      playerID: this.playerID,\r\n      reset: this.client.reset,\r\n      undo: this.client.undo,\r\n      redo: this.client.redo,\r\n    };\r\n\r\n  }\r\n\r\n}\r\n","import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport { Debug } from 'boardgame.io/dist/react';\r\nimport * as uuid from 'uuid';\r\n\r\nimport { AfterViewInit, Component, Input, OnChanges, OnDestroy, OnInit } from '@angular/core';\r\n\r\nexport interface GameState {\r\n  G: any;\r\n  ctx: any;\r\n  log: any;\r\n  isActive?: boolean;\r\n  _initial: any;\r\n}\r\n\r\nexport interface DebugProps {\r\n  gamestate: GameState;\r\n  gameID: string;\r\n  playerID?: string;\r\n  isConnected?: boolean;\r\n  isMultiplayer?: boolean;\r\n  moves?: any;\r\n  events?: any;\r\n  restore?: Function;\r\n  showLog?: boolean;\r\n  store?: any;\r\n  step?: Function;\r\n  reset?: Function;\r\n  reducer?: Function;\r\n  overrideGameState?: Function;\r\n  visualizeAI?: Function;\r\n}\r\n\r\n@Component({\r\n  selector: 'bio-debug',\r\n  template: '<span [id]=\"rootDomID\"></span>'\r\n})\r\nexport class DebugComponent implements OnInit, OnDestroy, OnChanges, AfterViewInit {\r\n  @Input() gamestate: GameState;\r\n  @Input() gameID: string;\r\n  @Input() playerID?: string;\r\n  @Input() isConnected?: boolean;\r\n  @Input() isMultiplayer?: boolean;\r\n  @Input() moves?: any;\r\n  @Input() events?: any;\r\n  @Input() restore?: Function;\r\n  @Input() showLog?: boolean;\r\n  @Input() store?: any;\r\n  @Input() step?: Function;\r\n  @Input() reset?: Function;\r\n  @Input() reducer?: Function;\r\n  @Input() overrideGameState?: Function;\r\n  @Input() visualizeAI?: Function;\r\n\r\n  rootDomID: string;\r\n\r\n  protected getRootDomNode() {\r\n    return document.getElementById(this.rootDomID);\r\n  }\r\n\r\n  protected getProps(): DebugProps {\r\n    const {\r\n      gamestate,\r\n      gameID,\r\n      playerID,\r\n      isConnected,\r\n      isMultiplayer,\r\n      moves,\r\n      events,\r\n      restore,\r\n      showLog,\r\n      store,\r\n      step,\r\n      reset,\r\n      reducer,\r\n      overrideGameState,\r\n      visualizeAI,\r\n    } = this;\r\n    return {\r\n      gamestate,\r\n      gameID,\r\n      playerID,\r\n      isConnected,\r\n      isMultiplayer,\r\n      moves,\r\n      events,\r\n      restore,\r\n      showLog,\r\n      store,\r\n      step,\r\n      reset,\r\n      reducer,\r\n      overrideGameState,\r\n      visualizeAI,\r\n    };\r\n  }\r\n\r\n  private isMounted(): boolean {\r\n    return !!this.rootDomID;\r\n  }\r\n\r\n  protected render() {\r\n    if (this.isMounted()) {\r\n      ReactDOM.render(\r\n        React.createElement(Debug, this.getProps()),\r\n        this.getRootDomNode()\r\n      );\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.rootDomID = uuid.v1();\r\n  }\r\n\r\n  ngOnChanges() {\r\n    this.render();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.render();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    ReactDOM.unmountComponentAtNode(this.getRootDomNode());\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { ClientComponent } from './bio-client.component';\r\nimport { CommonModule } from '@angular/common';\r\nimport { DynamicModule } from 'ng-dynamic-component';\r\nimport { DebugComponent } from './bio-debug.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n\r\n    DynamicModule.withComponents(null),\r\n  ],\r\n  declarations: [ClientComponent, DebugComponent],\r\n  exports: [ClientComponent]\r\n})\r\nexport class BoardgameIoModule { }\r\n"],"names":["RawClient","ReactDOM.render","React.createElement","uuid.v1","ReactDOM.unmountComponentAtNode"],"mappings":"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"}
