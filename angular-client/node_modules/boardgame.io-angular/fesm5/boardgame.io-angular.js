import { __assign } from 'tslib';
import { Component, Input, NgModule } from '@angular/core';
import { Client } from 'boardgame.io/dist/client';
import { createElement } from 'react';
import { render, unmountComponentAtNode } from 'react-dom';
import { Debug } from 'boardgame.io/dist/react';
import { v1 } from 'uuid';
import { CommonModule } from '@angular/common';
import { DynamicModule } from 'ng-dynamic-component';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var ClientComponent = /** @class */ (function () {
    function ClientComponent() {
        // instance inputs
        this.gameID = 'default';
        this.playerID = null;
        this.credentials = null;
        // overridable inputs (both class and instance)
        this.debug = true;
    }
    /**
     * @return {?}
     */
    ClientComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.client = Client({
            game: this.game,
            ai: this.ai,
            numPlayers: this.numPlayers,
            multiplayer: this.multiplayer,
            gameID: this.gameID,
            playerID: this.playerID,
            credentials: this.credentials,
            enhancer: this.enhancer,
        });
        // todo is this needed? (forceUpdate on react)
        // this.client.subscribe(() => {
        //   console.log('client.subscribe triggered (forceUpdate needed?)');
        // });
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    ClientComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (this.client) {
            // noinspection TsLint
            if (changes["gameID"] && changes["gameID"].currentValue != changes["gameID"].previousValue) {
                this.client.updateGameID(changes["gameID"].currentValue);
            }
            // noinspection TsLint
            if (changes["playerID"] && changes["playerID"].currentValue != changes["playerID"].previousValue) {
                this.client.updatePlayerID(changes["playerID"].currentValue);
            }
            // noinspection TsLint
            if (changes["credentials"] && changes["credentials"].currentValue != changes["credentials"].previousValue) {
                this.client.updateCredentials(changes["credentials"].currentValue);
            }
        }
    };
    /**
     * @return {?}
     */
    ClientComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        this.client.connect();
    };
    /**
     * @return {?}
     */
    ClientComponent.prototype.getBoardInputs = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ state = this.client.getState();
        return __assign({}, state, { isMultiplayer: this.multiplayer !== undefined, moves: this.client.moves, events: this.client.events, gameID: this.gameID, playerID: this.playerID, reset: this.client.reset, undo: this.client.undo, redo: this.client.redo });
    };
    ClientComponent.decorators = [
        { type: Component, args: [{
                    selector: 'bio-client',
                    template: "\n    <ng-container *ngIf=\"client\">\n      <ng-container *ngComponentOutlet=\"board;\n                                            ndcDynamicInputs: getBoardInputs()\">\n      </ng-container>\n    </ng-container>\n\n    <bio-debug *ngIf=\"debug && client\"\n               [gamestate]=\"client.getState()\"\n               [gameID]=\"gameID\"\n               [playerID]=\"playerID\"\n               [isMultiplayer]=\"multiplayer !== undefined\"\n               [moves]=\"client.moves\"\n               [events]=\"client.events\"\n               [store]=\"client.store\"\n               [step]=\"client.step\"\n               [reset]=\"client.reset\"\n               [reducer]=\"client.reducer\"\n    ></bio-debug>\n  "
                },] },
    ];
    ClientComponent.propDecorators = {
        game: [{ type: Input }],
        numPlayers: [{ type: Input }],
        board: [{ type: Input }],
        multiplayer: [{ type: Input }],
        ai: [{ type: Input }],
        enhancer: [{ type: Input }],
        gameID: [{ type: Input }],
        playerID: [{ type: Input }],
        credentials: [{ type: Input }],
        debug: [{ type: Input }]
    };
    return ClientComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var DebugComponent = /** @class */ (function () {
    function DebugComponent() {
    }
    /**
     * @return {?}
     */
    DebugComponent.prototype.getRootDomNode = /**
     * @return {?}
     */
    function () {
        return document.getElementById(this.rootDomID);
    };
    /**
     * @return {?}
     */
    DebugComponent.prototype.getProps = /**
     * @return {?}
     */
    function () {
        var _a = this, gamestate = _a.gamestate, gameID = _a.gameID, playerID = _a.playerID, isConnected = _a.isConnected, isMultiplayer = _a.isMultiplayer, moves = _a.moves, events = _a.events, restore = _a.restore, showLog = _a.showLog, store = _a.store, step = _a.step, reset = _a.reset, reducer = _a.reducer, overrideGameState = _a.overrideGameState, visualizeAI = _a.visualizeAI;
        return {
            gamestate: gamestate,
            gameID: gameID,
            playerID: playerID,
            isConnected: isConnected,
            isMultiplayer: isMultiplayer,
            moves: moves,
            events: events,
            restore: restore,
            showLog: showLog,
            store: store,
            step: step,
            reset: reset,
            reducer: reducer,
            overrideGameState: overrideGameState,
            visualizeAI: visualizeAI,
        };
    };
    /**
     * @return {?}
     */
    DebugComponent.prototype.isMounted = /**
     * @return {?}
     */
    function () {
        return !!this.rootDomID;
    };
    /**
     * @return {?}
     */
    DebugComponent.prototype.render = /**
     * @return {?}
     */
    function () {
        if (this.isMounted()) {
            render(createElement(Debug, this.getProps()), this.getRootDomNode());
        }
    };
    /**
     * @return {?}
     */
    DebugComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.rootDomID = v1();
    };
    /**
     * @return {?}
     */
    DebugComponent.prototype.ngOnChanges = /**
     * @return {?}
     */
    function () {
        this.render();
    };
    /**
     * @return {?}
     */
    DebugComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.render();
    };
    /**
     * @return {?}
     */
    DebugComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        unmountComponentAtNode(this.getRootDomNode());
    };
    DebugComponent.decorators = [
        { type: Component, args: [{
                    selector: 'bio-debug',
                    template: '<span [id]="rootDomID"></span>'
                },] },
    ];
    DebugComponent.propDecorators = {
        gamestate: [{ type: Input }],
        gameID: [{ type: Input }],
        playerID: [{ type: Input }],
        isConnected: [{ type: Input }],
        isMultiplayer: [{ type: Input }],
        moves: [{ type: Input }],
        events: [{ type: Input }],
        restore: [{ type: Input }],
        showLog: [{ type: Input }],
        store: [{ type: Input }],
        step: [{ type: Input }],
        reset: [{ type: Input }],
        reducer: [{ type: Input }],
        overrideGameState: [{ type: Input }],
        visualizeAI: [{ type: Input }]
    };
    return DebugComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var BoardgameIoModule = /** @class */ (function () {
    function BoardgameIoModule() {
    }
    BoardgameIoModule.decorators = [
        { type: NgModule, args: [{
                    imports: [
                        CommonModule,
                        DynamicModule.withComponents(null),
                    ],
                    declarations: [ClientComponent, DebugComponent],
                    exports: [ClientComponent]
                },] },
    ];
    return BoardgameIoModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { ClientComponent, BoardgameIoModule, DebugComponent as Éµa };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm9hcmRnYW1lLmlvLWFuZ3VsYXIuanMubWFwIiwic291cmNlcyI6WyJuZzovL2JvYXJkZ2FtZS5pby1hbmd1bGFyL2xpYi9iaW8tY2xpZW50LmNvbXBvbmVudC50cyIsIm5nOi8vYm9hcmRnYW1lLmlvLWFuZ3VsYXIvbGliL2Jpby1kZWJ1Zy5jb21wb25lbnQudHMiLCJuZzovL2JvYXJkZ2FtZS5pby1hbmd1bGFyL2xpYi9ib2FyZGdhbWUtaW8ubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFmdGVyQ29udGVudEluaXQsIENvbXBvbmVudCwgSW5wdXQsIE9uQ2hhbmdlcywgT25Jbml0LCBTaW1wbGVDaGFuZ2VzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENsaWVudCBhcyBSYXdDbGllbnQsIERlYnVnIH0gZnJvbSAnYm9hcmRnYW1lLmlvL2Rpc3QvY2xpZW50JztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYmlvLWNsaWVudCcsXHJcbiAgdGVtcGxhdGU6IGBcclxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJjbGllbnRcIj5cclxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdDb21wb25lbnRPdXRsZXQ9XCJib2FyZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZGNEeW5hbWljSW5wdXRzOiBnZXRCb2FyZElucHV0cygpXCI+XHJcbiAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgPC9uZy1jb250YWluZXI+XHJcblxyXG4gICAgPGJpby1kZWJ1ZyAqbmdJZj1cImRlYnVnICYmIGNsaWVudFwiXHJcbiAgICAgICAgICAgICAgIFtnYW1lc3RhdGVdPVwiY2xpZW50LmdldFN0YXRlKClcIlxyXG4gICAgICAgICAgICAgICBbZ2FtZUlEXT1cImdhbWVJRFwiXHJcbiAgICAgICAgICAgICAgIFtwbGF5ZXJJRF09XCJwbGF5ZXJJRFwiXHJcbiAgICAgICAgICAgICAgIFtpc011bHRpcGxheWVyXT1cIm11bHRpcGxheWVyICE9PSB1bmRlZmluZWRcIlxyXG4gICAgICAgICAgICAgICBbbW92ZXNdPVwiY2xpZW50Lm1vdmVzXCJcclxuICAgICAgICAgICAgICAgW2V2ZW50c109XCJjbGllbnQuZXZlbnRzXCJcclxuICAgICAgICAgICAgICAgW3N0b3JlXT1cImNsaWVudC5zdG9yZVwiXHJcbiAgICAgICAgICAgICAgIFtzdGVwXT1cImNsaWVudC5zdGVwXCJcclxuICAgICAgICAgICAgICAgW3Jlc2V0XT1cImNsaWVudC5yZXNldFwiXHJcbiAgICAgICAgICAgICAgIFtyZWR1Y2VyXT1cImNsaWVudC5yZWR1Y2VyXCJcclxuICAgID48L2Jpby1kZWJ1Zz5cclxuICBgXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBDbGllbnRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgQWZ0ZXJDb250ZW50SW5pdCB7XHJcblxyXG4gIC8vIGNsYXNzIGlucHV0cyAocG9zc2libGUgbW92ZSB0byBoaWdoZXIgbGV2ZWwgaW5pdGlhbGl6YXRpb24gKGUuZy4sIGNsYXNzIGZhY3RvcnkpXHJcbiAgQElucHV0KCkgZ2FtZTogYW55O1xyXG4gIEBJbnB1dCgpIG51bVBsYXllcnM6IG51bWJlcjtcclxuICBASW5wdXQoKSBib2FyZDogYW55O1xyXG4gIEBJbnB1dCgpIG11bHRpcGxheWVyOiBhbnk7XHJcbiAgQElucHV0KCkgYWk6IGFueTtcclxuICBASW5wdXQoKSBlbmhhbmNlcjogYW55O1xyXG5cclxuICAvLyBpbnN0YW5jZSBpbnB1dHNcclxuICBASW5wdXQoKSBnYW1lSUQgPSAnZGVmYXVsdCc7XHJcbiAgQElucHV0KCkgcGxheWVySUQ6IHN0cmluZyA9IG51bGw7XHJcbiAgQElucHV0KCkgY3JlZGVudGlhbHM6IHN0cmluZyA9IG51bGw7IC8vIFRPRE8gdGhpc1xyXG5cclxuICAvLyBvdmVycmlkYWJsZSBpbnB1dHMgKGJvdGggY2xhc3MgYW5kIGluc3RhbmNlKVxyXG4gIEBJbnB1dCgpIGRlYnVnID0gdHJ1ZTtcclxuXHJcbiAgY2xpZW50OiBhbnk7XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5jbGllbnQgPSBSYXdDbGllbnQoe1xyXG4gICAgICBnYW1lOiB0aGlzLmdhbWUsXHJcbiAgICAgIGFpOiB0aGlzLmFpLFxyXG4gICAgICBudW1QbGF5ZXJzOiB0aGlzLm51bVBsYXllcnMsXHJcbiAgICAgIG11bHRpcGxheWVyOiB0aGlzLm11bHRpcGxheWVyLFxyXG4gICAgICBnYW1lSUQ6IHRoaXMuZ2FtZUlELFxyXG4gICAgICBwbGF5ZXJJRDogdGhpcy5wbGF5ZXJJRCxcclxuICAgICAgY3JlZGVudGlhbHM6IHRoaXMuY3JlZGVudGlhbHMsXHJcbiAgICAgIGVuaGFuY2VyOiB0aGlzLmVuaGFuY2VyLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gdG9kbyBpcyB0aGlzIG5lZWRlZD8gKGZvcmNlVXBkYXRlIG9uIHJlYWN0KVxyXG4gICAgLy8gdGhpcy5jbGllbnQuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgIC8vICAgY29uc29sZS5sb2coJ2NsaWVudC5zdWJzY3JpYmUgdHJpZ2dlcmVkIChmb3JjZVVwZGF0ZSBuZWVkZWQ/KScpO1xyXG4gICAgLy8gfSk7XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICBpZiAodGhpcy5jbGllbnQpIHtcclxuICAgICAgLy8gbm9pbnNwZWN0aW9uIFRzTGludFxyXG4gICAgICBpZiAoY2hhbmdlcy5nYW1lSUQgJiYgY2hhbmdlcy5nYW1lSUQuY3VycmVudFZhbHVlICE9IGNoYW5nZXMuZ2FtZUlELnByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgICB0aGlzLmNsaWVudC51cGRhdGVHYW1lSUQoY2hhbmdlcy5nYW1lSUQuY3VycmVudFZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBub2luc3BlY3Rpb24gVHNMaW50XHJcbiAgICAgIGlmIChjaGFuZ2VzLnBsYXllcklEICYmIGNoYW5nZXMucGxheWVySUQuY3VycmVudFZhbHVlICE9IGNoYW5nZXMucGxheWVySUQucHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMuY2xpZW50LnVwZGF0ZVBsYXllcklEKGNoYW5nZXMucGxheWVySUQuY3VycmVudFZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBub2luc3BlY3Rpb24gVHNMaW50XHJcbiAgICAgIGlmIChjaGFuZ2VzLmNyZWRlbnRpYWxzICYmIGNoYW5nZXMuY3JlZGVudGlhbHMuY3VycmVudFZhbHVlICE9IGNoYW5nZXMuY3JlZGVudGlhbHMucHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMuY2xpZW50LnVwZGF0ZUNyZWRlbnRpYWxzKGNoYW5nZXMuY3JlZGVudGlhbHMuY3VycmVudFZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xyXG4gICAgdGhpcy5jbGllbnQuY29ubmVjdCgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Qm9hcmRJbnB1dHMoKSB7XHJcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuY2xpZW50LmdldFN0YXRlKCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi5zdGF0ZSxcclxuICAgICAgaXNNdWx0aXBsYXllcjogdGhpcy5tdWx0aXBsYXllciAhPT0gdW5kZWZpbmVkLFxyXG4gICAgICBtb3ZlczogdGhpcy5jbGllbnQubW92ZXMsXHJcbiAgICAgIGV2ZW50czogdGhpcy5jbGllbnQuZXZlbnRzLFxyXG4gICAgICBnYW1lSUQ6IHRoaXMuZ2FtZUlELFxyXG4gICAgICBwbGF5ZXJJRDogdGhpcy5wbGF5ZXJJRCxcclxuICAgICAgcmVzZXQ6IHRoaXMuY2xpZW50LnJlc2V0LFxyXG4gICAgICB1bmRvOiB0aGlzLmNsaWVudC51bmRvLFxyXG4gICAgICByZWRvOiB0aGlzLmNsaWVudC5yZWRvLFxyXG4gICAgfTtcclxuXHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCAqIGFzIFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XHJcbmltcG9ydCB7IERlYnVnIH0gZnJvbSAnYm9hcmRnYW1lLmlvL2Rpc3QvcmVhY3QnO1xyXG5pbXBvcnQgKiBhcyB1dWlkIGZyb20gJ3V1aWQnO1xyXG5cclxuaW1wb3J0IHsgQWZ0ZXJWaWV3SW5pdCwgQ29tcG9uZW50LCBJbnB1dCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3ksIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBHYW1lU3RhdGUge1xyXG4gIEc6IGFueTtcclxuICBjdHg6IGFueTtcclxuICBsb2c6IGFueTtcclxuICBpc0FjdGl2ZT86IGJvb2xlYW47XHJcbiAgX2luaXRpYWw6IGFueTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEZWJ1Z1Byb3BzIHtcclxuICBnYW1lc3RhdGU6IEdhbWVTdGF0ZTtcclxuICBnYW1lSUQ6IHN0cmluZztcclxuICBwbGF5ZXJJRD86IHN0cmluZztcclxuICBpc0Nvbm5lY3RlZD86IGJvb2xlYW47XHJcbiAgaXNNdWx0aXBsYXllcj86IGJvb2xlYW47XHJcbiAgbW92ZXM/OiBhbnk7XHJcbiAgZXZlbnRzPzogYW55O1xyXG4gIHJlc3RvcmU/OiBGdW5jdGlvbjtcclxuICBzaG93TG9nPzogYm9vbGVhbjtcclxuICBzdG9yZT86IGFueTtcclxuICBzdGVwPzogRnVuY3Rpb247XHJcbiAgcmVzZXQ/OiBGdW5jdGlvbjtcclxuICByZWR1Y2VyPzogRnVuY3Rpb247XHJcbiAgb3ZlcnJpZGVHYW1lU3RhdGU/OiBGdW5jdGlvbjtcclxuICB2aXN1YWxpemVBST86IEZ1bmN0aW9uO1xyXG59XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2Jpby1kZWJ1ZycsXHJcbiAgdGVtcGxhdGU6ICc8c3BhbiBbaWRdPVwicm9vdERvbUlEXCI+PC9zcGFuPidcclxufSlcclxuZXhwb3J0IGNsYXNzIERlYnVnQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3ksIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3SW5pdCB7XHJcbiAgQElucHV0KCkgZ2FtZXN0YXRlOiBHYW1lU3RhdGU7XHJcbiAgQElucHV0KCkgZ2FtZUlEOiBzdHJpbmc7XHJcbiAgQElucHV0KCkgcGxheWVySUQ/OiBzdHJpbmc7XHJcbiAgQElucHV0KCkgaXNDb25uZWN0ZWQ/OiBib29sZWFuO1xyXG4gIEBJbnB1dCgpIGlzTXVsdGlwbGF5ZXI/OiBib29sZWFuO1xyXG4gIEBJbnB1dCgpIG1vdmVzPzogYW55O1xyXG4gIEBJbnB1dCgpIGV2ZW50cz86IGFueTtcclxuICBASW5wdXQoKSByZXN0b3JlPzogRnVuY3Rpb247XHJcbiAgQElucHV0KCkgc2hvd0xvZz86IGJvb2xlYW47XHJcbiAgQElucHV0KCkgc3RvcmU/OiBhbnk7XHJcbiAgQElucHV0KCkgc3RlcD86IEZ1bmN0aW9uO1xyXG4gIEBJbnB1dCgpIHJlc2V0PzogRnVuY3Rpb247XHJcbiAgQElucHV0KCkgcmVkdWNlcj86IEZ1bmN0aW9uO1xyXG4gIEBJbnB1dCgpIG92ZXJyaWRlR2FtZVN0YXRlPzogRnVuY3Rpb247XHJcbiAgQElucHV0KCkgdmlzdWFsaXplQUk/OiBGdW5jdGlvbjtcclxuXHJcbiAgcm9vdERvbUlEOiBzdHJpbmc7XHJcblxyXG4gIHByb3RlY3RlZCBnZXRSb290RG9tTm9kZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnJvb3REb21JRCk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZ2V0UHJvcHMoKTogRGVidWdQcm9wcyB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGdhbWVzdGF0ZSxcclxuICAgICAgZ2FtZUlELFxyXG4gICAgICBwbGF5ZXJJRCxcclxuICAgICAgaXNDb25uZWN0ZWQsXHJcbiAgICAgIGlzTXVsdGlwbGF5ZXIsXHJcbiAgICAgIG1vdmVzLFxyXG4gICAgICBldmVudHMsXHJcbiAgICAgIHJlc3RvcmUsXHJcbiAgICAgIHNob3dMb2csXHJcbiAgICAgIHN0b3JlLFxyXG4gICAgICBzdGVwLFxyXG4gICAgICByZXNldCxcclxuICAgICAgcmVkdWNlcixcclxuICAgICAgb3ZlcnJpZGVHYW1lU3RhdGUsXHJcbiAgICAgIHZpc3VhbGl6ZUFJLFxyXG4gICAgfSA9IHRoaXM7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBnYW1lc3RhdGUsXHJcbiAgICAgIGdhbWVJRCxcclxuICAgICAgcGxheWVySUQsXHJcbiAgICAgIGlzQ29ubmVjdGVkLFxyXG4gICAgICBpc011bHRpcGxheWVyLFxyXG4gICAgICBtb3ZlcyxcclxuICAgICAgZXZlbnRzLFxyXG4gICAgICByZXN0b3JlLFxyXG4gICAgICBzaG93TG9nLFxyXG4gICAgICBzdG9yZSxcclxuICAgICAgc3RlcCxcclxuICAgICAgcmVzZXQsXHJcbiAgICAgIHJlZHVjZXIsXHJcbiAgICAgIG92ZXJyaWRlR2FtZVN0YXRlLFxyXG4gICAgICB2aXN1YWxpemVBSSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGlzTW91bnRlZCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAhIXRoaXMucm9vdERvbUlEO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIHJlbmRlcigpIHtcclxuICAgIGlmICh0aGlzLmlzTW91bnRlZCgpKSB7XHJcbiAgICAgIFJlYWN0RE9NLnJlbmRlcihcclxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERlYnVnLCB0aGlzLmdldFByb3BzKCkpLFxyXG4gICAgICAgIHRoaXMuZ2V0Um9vdERvbU5vZGUoKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLnJvb3REb21JRCA9IHV1aWQudjEoKTtcclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKCkge1xyXG4gICAgdGhpcy5yZW5kZXIoKTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuICAgIFJlYWN0RE9NLnVubW91bnRDb21wb25lbnRBdE5vZGUodGhpcy5nZXRSb290RG9tTm9kZSgpKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQ2xpZW50Q29tcG9uZW50IH0gZnJvbSAnLi9iaW8tY2xpZW50LmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7IER5bmFtaWNNb2R1bGUgfSBmcm9tICduZy1keW5hbWljLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IERlYnVnQ29tcG9uZW50IH0gZnJvbSAnLi9iaW8tZGVidWcuY29tcG9uZW50JztcclxuXHJcbkBOZ01vZHVsZSh7XHJcbiAgaW1wb3J0czogW1xyXG4gICAgQ29tbW9uTW9kdWxlLFxyXG5cclxuICAgIER5bmFtaWNNb2R1bGUud2l0aENvbXBvbmVudHMobnVsbCksXHJcbiAgXSxcclxuICBkZWNsYXJhdGlvbnM6IFtDbGllbnRDb21wb25lbnQsIERlYnVnQ29tcG9uZW50XSxcclxuICBleHBvcnRzOiBbQ2xpZW50Q29tcG9uZW50XVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQm9hcmRnYW1lSW9Nb2R1bGUgeyB9XHJcbiJdLCJuYW1lcyI6WyJSYXdDbGllbnQiLCJSZWFjdERPTS5yZW5kZXIiLCJSZWFjdC5jcmVhdGVFbGVtZW50IiwidXVpZC52MSIsIlJlYWN0RE9NLnVubW91bnRDb21wb25lbnRBdE5vZGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O3NCQXFDb0IsU0FBUzt3QkFDQyxJQUFJOzJCQUNELElBQUk7O3FCQUdsQixJQUFJOzs7OztJQUly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